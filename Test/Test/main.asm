.ORG 0

; CONFIG PA0, PA1, PA2, PA3 -> INPUT
; CONFIG PORTB OUTPUT

	SER R16
	OUT DDRB, R16
	OUT PORTA, R16
	CLR R16
	OUT DDRA, R16

; SOLUTION

LOOP:
	CALL BUTTON_4PIN
	CPI R16, 0B11111101
	BREQ SW_1
	CPI R16, 0B11111011
	BREQ SW_2
	CPI R16, 0B11110111
	BREQ SW_3
	LDI R17, $FF	; 8 LED ON
	OUT PORTB, R17
	RJMP LOOP
SW_1:
	LDI R17, $0F	; 4 LED FIRST ON
	OUT PORTB, R17
	RJMP LOOP

SW_2:
	LDI R17, $F0	;4 LED FINAL ON
	OUT PORTB, R17
	RJMP LOOP

SW_3:
	LDI R17, $00	;8 LED OFF
	OUT PORTB, R17
	RJMP LOOP



BUTTON_4PIN:
	LDI R17, 50
DEBOUNCING_1:
	IN R16, PINA
	CPI R16, $FF		;DETECTE STATUS OF BUTTON
	BREQ BUTTON_4PIN
	DEC R17
	BRNE DEBOUNCING_1

RISE:
	LDI R17, 50
DEBOUNCING_2:
	IN R18, PINA		;DETECTE STATUS OF BUTTON
	CPI R18, $FF
	BRNE RISE
	DEC R17
	BRNE DEBOUNCING_2

	RET